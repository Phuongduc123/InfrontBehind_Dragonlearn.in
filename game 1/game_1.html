<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>In Front or Behind</title>
        <link href="css/all.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="style_game.css">
        <script src="game_1.js"></script>
    </head>
    <body>
        <div class="container">
            <!--background image-->
            <img src="../image/Frame 2.png" alt="Snow" style="width:100%;height: 100%;">
            <!--background image-->

            <!--center screen-->
            <div class="center_screen">
                <p id="rcorners4"></p>

                <!--top bar-->
                <div class="top_bar">
                    <!--back button-->
                    <a href="index.html"><i class="fas fa-chevron-left"></i> Back</a>
                    <!--back button-->

                    <!--progress bar-->
                    <div class="beads-wrapper">
                        <div class="progress-bar">
                            <i class="fas fa-circle"></i><i class="fas fa-circle"></i>
                        </div>
                    </div>
                    <!--progress bar-->
                </div>
                <!--top bar-->

                <!--sound and instruction-->
                <div class="sound-and-instruction">
                    <!--sound-->
                    <button type="image" id="btnSpeak"></button>
                    <!--sound-->

                    <!--instruction-->
                    <p id="instruction"> Tuấn Thành ngu lồn</p>
                    <!--instruction-->
                    
                    <!--API audio processing-->
                    <select id='voiceList'></select> <br><br>
                    <script>
                        var voiceList = document.querySelector('#voiceList');
                        var btnSpeak = document.querySelector('#btnSpeak');
                        var synth = window.speechSynthesis;
                        var voices = [];

                        PopulateVoices();
                        if(speechSynthesis !== undefined){
                            speechSynthesis.onvoiceschanged = PopulateVoices;
                        }

                        btnSpeak.addEventListener('click', ()=> {
                            var toSpeak = new SpeechSynthesisUtterance(instruction.textContent);
                            var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
                            voices.forEach((voice)=>{
                                if(voice.name === selectedVoiceName){
                                    toSpeak.voice = voice;
                                }
                            });
                            synth.speak(toSpeak);
                        });

                        function PopulateVoices(){
                            voices = synth.getVoices();
                            var selectedIndex = voiceList.selectedIndex < 0 ? 0 : voiceList.selectedIndex;
                            voiceList.innerHTML = '';
                            voices.forEach((voice)=>{
                                var listItem = document.createElement('option');
                                listItem.textContent = voice.name;
                                listItem.setAttribute('data-lang', voice.lang);
                                listItem.setAttribute('data-name', voice.name);
                                voiceList.appendChild(listItem);
                            });

                            voiceList.selectedIndex = selectedIndex;
                        }
                    </script>
                    <!--API audio processing-->
                </div>
                <!--sound and instruction-->
            </div>
            <!--center screen-->

            <!--animation-->
            <img id="bag" src="../image/41.png">
            <img id="destination" src="../image/49.png">
            <!--animation-->

            <!--destination placement-->
            <section id="placement">

            </section>
            <!--destination placement-->

            <!--ball-->
            <section id="object">
                <img id="ball" src="../image/35.png">
            </section>
            <!--ball-->
            
        </div> 
    </body>
</html>